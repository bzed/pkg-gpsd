.\" ** You probably do not want to edit this file directly **
.\" It was generated using the DocBook XSL Stylesheets (version 1.69.1).
.\" Instead of manually editing it, you probably should edit the DocBook XML
.\" source for it and then use the DocBook XSL Stylesheets to regenerate it.
.TH "GPSFAKE" "1" "07/28/2006" "12 Feb 2005" "12 Feb 2005"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "NAME"
gpsfake \- test harness for gpsd, simulating a GPS
.SH "SYNOPSIS"
.HP 8
\fBgpsfake\fR [\-1] [\-h] [\-b] [\-c\ \fIinterval\fR] [\-i] [\-D\ \fIdebuglevel\fR] [\-l] [\-m\ \fImonitor\fR] [\-n] [\-o\ \fIoptions\fR] [\-p] [\-r\ \fIinitcmd\fR] [\-s\ \fIspeed\fR] [\-v] \fIlogfile\fR
.SH "DESCRIPTION"
.PP
gpsfake
is a test harness for
gpsd
and its clients. It opens a pty (pseudo\-TTY), launches a
gpsd
instance that thinks the slave side of the pty is its GPS device, and repeatedly feeds the contents of a test logfile through the master side to the GPS.
.PP
gpsfake
does not require root privileges, and can be run concurrently with a production
gpsd
instance without causing problems.
.PP
The logfile may be of NMEA, SiRF\-II packets, or Zodiac packets. Leading lines beginning with # will be treated as comments and ignored.
.PP
The
gpsd
instance is run in foreground. The thread sending fake GPS data to the daemon is run in background.
.SH "OPTIONS"
.PP
With the \-1 option, the logfile is interpreted once only rather than repeatedly. This option is intended to facilitate regression testing.
.PP
The \-b option enables a twirling\-baton progress indicator on standard error. At termination, it reports elaped time.
.PP
The \-c option sets the delay between sentences in seconds. Fractional values of seconds are legal. The default is zero (no delay).
.PP
The \-l option makes the program dump a line or packet number just before each sentence is fed to the daemon. If the sentence is textual (e.g. NMEA, the text is dumped as well).
.PP
The \-i option is for single\-stepping through logfiles. It dumps the line or packet number (and the sentence if the protocol is textual) followed by "? ". Only when the user keys Enter is the line actually fed to
gpsd.
.PP
The \-m option specifies a monitor program inside which the daemon should be run. This option is intended to be used with
\fBvalgrind\fR(1),
\fBgdb\fR(1)
and similar programs.
.PP
The \-g option uses the monitor facility to run the gpsd within gpsfake under control of gdb.
.PP
The \-o option specifies options to pass to the daemon. The \-n option passes \-n to start the daemon reading the GPS without waiting for a client (equivalent to \-o "\-n"). The \-D option passes a \-D option to the daemon: thus \-D 4 is shorthand for \-o "\-D 4".
.PP
The \-p option dumps the NMEA and GPSD notifications generated by the log to standard output.
.PP
The \-r option specifies an initialization comand to use. The default is "w+r+"; "r=2" might be another interesting value.
.PP
The \-s option sets the baud rate for the slave tty. The default is 4800.
.PP
The \-v option enables verbose progress reports to stderr. It is mainly useful for debugging gpsfake itself.
.PP
The \-h option makes
gpsfake
print a usage message and exit.
.PP
The argument must be the name of a file containing the data to be cycled at the device.
gpsfake
will print a notification each time it cycles.
.SH "CUSTOM TESTS"
.PP
gpsfake
is a trivial wrapper around a Python module, also named gpsfake, that can be used to fully script sessions involving a
gpsd
instance, any number of client sessions, and any number of fake GPSes feeding the daemon instance with data from specified sentence logs.
.PP
Source and embedded documentation for this module is shipped with the
gpsd
development tools. You can use it to torture\-test either
gpsd
itself or any
gpsd\-aware client application.
.SH "SEE ALSO"
.PP
\fBgpsd\fR(8),
\fBgps\fR(1),
\fBlibgps\fR(3),
\fBlibgpsd\fR(3),
\fBgpsprof\fR(1),
\fBgnuplot\fR(1).
.SH "AUTHOR"
.PP
Eric S. Raymond
<esr@thyrsus.com>. There is a project page for
gpsd[1]\&\fIhere\fR.
.SH "REFERENCES"
.TP 3
1.\ here
\%http://gpsd.berlios.de/
