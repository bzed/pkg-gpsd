#! /bin/sh
# postrm script for gpsd

set -e

case "$1" in
    purge)
	[ ! -f /etc/default/gpsd ] || rm /etc/default/gpsd
    ;;

    remove|upgrade|failed-upgrade|abort-install|disappear)
    ;;

    abort-upgrade)
        if dpkg --compare-versions "$2" lt 2.34; then
            dpkg-divert --package gpsd --add --rename \
                        --divert /usr/bin/gpsd.gpsdrive /usr/bin/gpsd
            dpkg-divert --package gpsd --add --rename \
                        --divert /usr/share/man/man1/gpsd.gpsdrive.1.gz \
                                 /usr/share/man/man1/gpsd.1.gz
        fi
    ;;

    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1

esac

#DEBHELPER#

exit 0
