From b34bd07cbdbbf17212417265c6b62456175fde1a Mon Sep 17 00:00:00 2001
From: "Eric S. Raymond" <esr@thyrsus.com>
Date: Mon, 9 Jan 2012 13:25:57 -0500
Subject: [PATCH] Fix bug in AIS Type6 processing.  Fixes Savannah bug #35266.

---
 driver_aivdm.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/driver_aivdm.c b/driver_aivdm.c
index a05a480..d7fb1a0 100644
--- a/driver_aivdm.c
+++ b/driver_aivdm.c
@@ -314,8 +314,8 @@ bool aivdm_decode(const char *buf, size_t buflen,
 	    ais->type6.fid            = UBITS(82, 6);
 	    ais->type6.bitcount       = ais_context->bitlen - 88;
 	    imo = false;
-	    if (ais->type8.dac == 1)
-		switch (ais->type8.fid) {
+	    if (ais->type6.dac == 1)
+		switch (ais->type6.fid) {
 		case 12:	/* IMO236 - Dangerous cargo indication */
 		    UCHARS(88, ais->type6.dac1fid12.lastport);
 		    ais->type6.dac1fid12.lmonth		= UBITS(118, 4);
-- 
1.7.7.1

