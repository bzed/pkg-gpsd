From a02226a6461a4bdb245f6c002c0f0e90e6d0b1fb Mon Sep 17 00:00:00 2001
From: "Eric S. Raymond" <esr@thyrsus.com>
Date: Fri, 20 Apr 2012 04:41:58 -0400
Subject: [PATCH] bits.c has to move, otherwise linker gets cconfused while
 building test_bits.

---
 SConstruct |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/SConstruct
+++ b/SConstruct
@@ -620,6 +620,7 @@ libgps_version = "%d.%d.%d" %(libgps_ver
 
 libgps_sources = [
     "ais_json.c",
+    "bits.c",
     "daemon.c",
     "gpsutils.c",
     "gpsdclient.c",
@@ -641,7 +642,6 @@ if cxx and env['libgpsmm']:
     libgps_sources.append("libgpsmm.cpp")
 
 libgpsd_sources = [
-    "bits.c",
     "bsd_base64.c",
     "crc24q.c",
     "gpsd_json.c",
@@ -891,7 +891,7 @@ env.Depends(test_mkgmtime, compiled_gpsl
 test_trig = env.Program('test_trig', ['test_trig.c'], parse_flags=["-lm"])
 test_packet = env.Program('test_packet', ['test_packet.c'], parse_flags=gpsdlibs)
 env.Depends(test_packet, [compiled_gpsdlib, compiled_gpslib])
-test_bits = env.Program('test_bits', ['test_bits.c', 'bits.c'])
+test_bits = env.Program('test_bits', ['test_bits.c'], parse_flags=gpslibs)
 env.Depends(test_bits, [compiled_gpsdlib, compiled_gpslib])
 test_gpsmm = env.Program('test_gpsmm', ['test_gpsmm.cpp'], parse_flags=gpslibs)
 env.Depends(test_gpsmm, compiled_gpslib)
