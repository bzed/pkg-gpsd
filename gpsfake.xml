<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE refentry PUBLIC 
   "-//OASIS//DTD DocBook XML V4.1.2//EN"
   "docbook/docbookx.dtd">
<refentry id='gpsfake.1'>
<refmeta>
<refentrytitle>gpsfake</refentrytitle>
<manvolnum>1</manvolnum>
<refmiscinfo class='date'>12 Feb 2005</refmiscinfo>
</refmeta>
<refnamediv id='name'>
<refname>gpsfake</refname>
<refpurpose>test harness for gpsd, simulating a GPS</refpurpose>
</refnamediv>
<refsynopsisdiv id='synopsis'>

<cmdsynopsis>
  <command>gpsfake</command>  
      <arg choice='opt'>-h</arg>
      <arg choice='opt'>-c <replaceable>interval</replaceable></arg>
      <arg choice='opt'>-D <replaceable>debuglevel</replaceable></arg>
      <arg choice='opt'>-g</arg>
      <arg choice='opt'>-l</arg>
      <arg choice='opt'>-o <replaceable>options</replaceable></arg>
      <arg choice='opt'>-p</arg>
      <arg choice='opt'>-s <replaceable>speed</replaceable></arg>
      <arg choice='opt'>-v</arg>
      <arg choice='opt'><replaceable>logfile</replaceable></arg>
</cmdsynopsis>
</refsynopsisdiv>

<refsect1 id='description'><title>DESCRIPTION</title>

<para><application>gpsfake</application> is a test harness for 
<application>gpsd</application> and its clients.  It opens a pty
(pseudo-TTY), launches a <application>gpsd</application> instance that
thinks the slave side of the pty is its GPS device, and repeatedly
feeds the contents of a test logfile through the master side to the
GPS.</para>

<para><application>gpsfake</application> does not require root
privileges, and can be run concurrently with a production 
<application>gpsd</application> instance without causing problems.</para>

<para>The logfile may be of NMEA, SiRF-II packets, or Zodiac packets.
Leading lines beginning with # will be treated as comments and
ignored.</para>

<para>The <application>gpsd</application> instance is run in
foreground.  The thread sending fake GPS data to the daemon 
uis run in background.</para>

</refsect1>
<refsect1 id='options'><title>OPTIONS</title>

<para>The -c option sets the delay between sentences in
seconds. Fractional values of seconds are legal.</para>

<para>The -g option runs <application>gpsd</application> under the
control of gdb, the GNU debugger. The thread that will send data to
the daemon instance waits until it sees the pidfile created, so you
may do any setup necessary at the gdb command prompt before typing
"run" to begin feeding the log to the daemon.</para>

<para>The -l option makes the program dump a line or packet number just
before each sentence is fed to the daemon. If the sentence is
textual (e.g. NMEA, the text is dumped as well).</para>

<para>The -o option specifies options to pass to the daemon.
Passing "-n" is often useful.  The -D option passes a -D option
to the daemon: thus -D 4 is shorthand for -o "-D 4".</para>

<para>The -p option dumps the NMEA and GPSD notifications generated
by the log to standard output.  The logfile is interpreted once
only.  (This option is intended to facilitate regression testing.)</para>

<para>The -s option sets the baud rate for the slave tty.  The
default is 4800.</para>

<para>The -v option enables more progress messages to standard error.</para>

<para>The -h option makes <application>gpsfake</application> print 
a usage message and exit.</para>

<para>The argument must be the name of a file containing the 
data to be cycled at the device. <application>gpsfake</application> 
will print a notification each time it cycles.</para>

</refsect1>
<refsect1 id='see_also'><title>SEE ALSO</title>
<para>
<citerefentry><refentrytitle>gpsd</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
<citerefentry><refentrytitle>xgps</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
<citerefentry><refentrytitle>libgps</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
<citerefentry><refentrytitle>libgpsd</refentrytitle><manvolnum>3</manvolnum></citerefentry>,
<citerefentry><refentrytitle>gpsprof</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
<citerefentry><refentrytitle>gnuplot</refentrytitle><manvolnum>1</manvolnum></citerefentry>.
</para>
</refsect1>

<refsect1 id='maintainer'><title>AUTHOR</title> 

<para>Eric S. Raymond <email>esr@thyrsus.com</email>.  There is a
project page for <application>gpsd</application> <ulink
url="http://gpsd.berlios.de/">here</ulink>.</para>

</refsect1>

</refentry>

